"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_history_ts-app_assets_modules_github_profile_edit-social-account_ts-88f6ec"],{73893:(e,t,n)=>{let o,i;n.d(t,{lO:()=>f,qA:()=>d,y0:()=>a});let r=[],s=0;function a(){return o}function l(){try{return Math.min(Math.max(0,history.length)||0,9007199254740991)}catch(e){return 0}}function c(e){o=e;let t=location.href;r[l()-1+s]={url:t,state:o},r.length=l(),window.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}function u(){return new Date().getTime()}function d(e,t,n){s=0;let o={_id:u(),...e};history.pushState(o,t,n),c(o)}function f(e,t,n){let i={...o,...e};history.replaceState(i,t,n),c(i)}o=function(){let e={_id:new Date().getTime(),...history.state};return c(e),e}(),window.addEventListener("popstate",function(e){let t=e.state;if(!t||!t._id&&!t.turbo?.restorationIdentifier)return;let n=t.turbo?.restorationIdentifier;r[l()-1+s-1]?.state?.turbo?.restorationIdentifier===n?s--:s++,c(t)},!0),window.addEventListener("turbo:visit",e=>{e instanceof CustomEvent&&(i=e.detail.action)}),window.addEventListener("turbo:load",()=>{"restore"!==i&&(s=0,f(history.state,"",""))}),window.addEventListener("hashchange",function(){if(l()>r.length){let e={_id:u()};history.replaceState(e,"",location.href),c(e)}},!0),window.addEventListener("pageshow",()=>{r=[],s=0})},42315:(e,t,n)=>{var o=n(76006),i=n(80702);function r(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}let s=class WaitingFormElement extends HTMLElement{async submitPolitely(){this.submit.disabled=!0;try{this.prerequisites.length>0&&await Promise.all(this.prerequisites.map(e=>this.getPrerequisitePromise(e))),(0,i.Bt)(this.form)}finally{this.submit.disabled=!1}}getPrerequisitePromise(e){let t=e.getAttribute("data-waiting-form-method")||"getPromise";return e[t]()}};r([o.fA],s.prototype,"form",void 0),r([o.GO],s.prototype,"prerequisites",void 0),r([o.fA],s.prototype,"submit",void 0),s=r([o.Ih],s);let SocialAccountEditorElement=class SocialAccountEditorElement extends HTMLElement{recognizeUrl(){this.recognitionPromise=new Promise(async e=>{this.preprocessUrl();let t=await this.findMatchingSocialAccountIconOption(this.urlField.value);this.setChosenSocialIcon(t),e()})}resetToDefault(){this.urlField.value!==this.urlField.defaultValue&&(0,i.Se)(this.urlField,this.urlField.defaultValue)}waitForRecognition(){return this.recognitionPromise}preprocessUrl(){let e=this.urlField.value.trim();0===e.length||/^https?:\/\//.test(e)||(this.urlField.value=`https://${e}`)}setChosenSocialIcon(e){let t=e.getAttribute("data-provider-key")||"generic";for(let t of this.iconOptions)t.hidden=t!==e;this.iconSpinner.hidden=!0,this.iconField.value=t}async findMatchingSocialAccountIconOption(e){for(let t of this.iconOptions)for(let n of t.querySelectorAll("[data-provider-pattern]"))if(RegExp(n.getAttribute("data-provider-pattern"),"i").test(e))return t;return await this.findNodeInfoIconOption(e)||this.iconGeneric}async findNodeInfoIconOption(e){if(0===this.nodeinfoSoftwareUrl.trim().length)return null;let t=new Map;for(let n of this.iconOptions)for(let o of n.querySelectorAll("[data-try-nodeinfo-pattern]")){let i=RegExp(o.getAttribute("data-try-nodeinfo-pattern"),"i"),r=o.getAttribute("data-nodeinfo-software");e.match(i)&&r&&t.set(r,n)}if(0===t.size)return null;let n=null;try{n=new URL(e,window.location.origin)}catch(e){return null}this.showSpinner();let o=new URL(this.nodeinfoSoftwareUrl,window.location.origin);o.searchParams.set("host",n.host);let i=await fetch(o,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),r=await i.json(),s=r?.software_name;return s&&t.get(s)||null}showSpinner(){for(let e of this.iconOptions)e.hidden=!0;this.iconSpinner.hidden=!1}constructor(...e){super(...e),this.nodeinfoSoftwareUrl="",this.recognitionPromise=Promise.resolve()}};r([o.fA],SocialAccountEditorElement.prototype,"urlField",void 0),r([o.fA],SocialAccountEditorElement.prototype,"iconField",void 0),r([o.GO],SocialAccountEditorElement.prototype,"iconOptions",void 0),r([o.fA],SocialAccountEditorElement.prototype,"iconGeneric",void 0),r([o.fA],SocialAccountEditorElement.prototype,"iconSpinner",void 0),r([o.Lj],SocialAccountEditorElement.prototype,"nodeinfoSoftwareUrl",void 0),SocialAccountEditorElement=r([o.Ih],SocialAccountEditorElement)},20223:(e,t,n)=>{(0,n(59753).on)("change",".js-profile-editable-pronouns-select",function(){let e=document.querySelector(".js-profile-editable-pronouns-select"),t=document.querySelector(".js-profile-editable-pronouns-custom"),n=t.getAttribute("data-initial-value");"Custom"===e.value?([...e.options].find(e=>e.value===n)?t.value="":t.value=n,t.hidden=!1,t.focus()):(t.value=e.value,t.hidden=!0)})},80810:(e,t,n)=>{n.d(t,{N:()=>i,x:()=>r});var o=n(71207);function i(e,t){r((e.getAttribute("aria-label")||e.innerText||"").trim(),t)}function r(e,t){let{assertive:n,selector:i}=t??{};!function(e,t,n){let i=o.n4?.querySelector(n||(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice"));i&&(i.textContent===e?i.textContent=`${e}\u00A0`:i.textContent=e)}(e,n,i)}},34532:(e,t,n)=>{n.d(t,{DF:()=>u,Fr:()=>d,a_:()=>c});var o=n(5223);let i=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),this.response=t}};var r=n(47940),s=n(50655);let a="server-x-safe-html",l=r.ZO.createPolicy(a,{createHTML:(e,t)=>s.O.apply({policy:()=>(!function(e,t,n=!1){let o=t.headers.get("content-type")||"";if(!n&&!o.startsWith("text/html"))throw new i(`expected response with text/html, but was ${o}`,t);if(n&&!(o.startsWith("text/html")||o.startsWith("application/json")))throw new i(`expected response with text/html or application/json, but was ${o}`,t);let r=t.headers.get("x-html-safe");if(r){if(!e.includes(r))throw new i("response X-HTML-Safe nonce did not match",t)}else throw new i("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(document),t),e),policyName:a,fallback:e,silenceErrorReporting:!0})});async function c(e,t,n){let i=new Request(t,n);i.headers.append("X-Requested-With","XMLHttpRequest");let r=await self.fetch(i);if(r.status<200||r.status>=300)throw Error(`HTTP ${r.status}${r.statusText||""}`);let s=l.createHTML(await r.text(),r);return(0,o.r)(e,s)}function u(e,t,n=1e3,o=[200],i=[202]){return async function n(r){let s=new Request(e,t);s.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(s);if(i.includes(a.status))return await new Promise(e=>setTimeout(e,r)),n(1.5*r);if(o.includes(a.status))return a;if(a.status<200||a.status>=300)throw Error(`HTTP ${a.status}${a.statusText||""}`);throw Error(`Unexpected ${a.status} response status from poll endpoint`)}(n)}async function d(e,t,n){let{wait:o=500,acceptedStatusCodes:i=[200],max:r=3,attempt:s=0}=n||{},a=async()=>new Promise((n,a)=>{setTimeout(async()=>{try{let o=new Request(e,t);o.headers.append("X-Requested-With","XMLHttpRequest");let a=await self.fetch(o);if(i.includes(a.status)||s+1===r)return n(a);n("retry")}catch(e){a(e)}},o*s)}),l=await a();return"retry"!==l?l:d(e,t,{wait:o,acceptedStatusCodes:i,max:r,attempt:s+1})}},80702:(e,t,n)=>{n.d(t,{Bt:()=>r,DN:()=>a,KL:()=>u,Se:()=>s,qC:()=>d,sw:()=>l});var o=n(31347);function i(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:n}))}function r(e,t){t&&(function(e,t){if(!(e instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(t instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==t.type)throw TypeError("The specified element is not a submit button.");if(!e||e!==t.form)throw Error("The specified element is not owned by the form element.")}(e,t),(0,o.j)(t)),i(e,"submit",!0)&&e.submit()}function s(e,t){if("boolean"==typeof t){if(e instanceof HTMLInputElement)e.checked=t;else throw TypeError("only checkboxes can be set to boolean value")}else{if("checkbox"===e.type)throw TypeError("checkbox can't be set to string value");e.value=t}i(e,"change",!1)}function a(e,t){for(let n in t){let o=t[n],i=e.elements.namedItem(n);i instanceof HTMLInputElement?i.value=o:i instanceof HTMLTextAreaElement&&(i.value=o)}}function l(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=(e.getAttribute("type")||"").toLowerCase();return"select"===t||"textarea"===t||"input"===t&&"submit"!==n&&"reset"!==n||e.isContentEditable}function c(e){return new URLSearchParams(e)}function u(e,t){let n=new URLSearchParams(e.search);for(let[e,o]of c(t))n.append(e,o);return n.toString()}function d(e){return c(new FormData(e)).toString()}},31347:(e,t,n)=>{function o(e){let t=e.closest("form");if(!(t instanceof HTMLFormElement))return;let n=i(t);if(e.name){let o=e.matches("input[type=submit]")?"Submit":"",i=e.value||o;n||((n=document.createElement("input")).type="hidden",n.classList.add("js-submit-button-value"),t.prepend(n)),n.name=e.name,n.value=i}else n&&n.remove()}function i(e){let t=e.querySelector("input.js-submit-button-value");return t instanceof HTMLInputElement?t:null}n.d(t,{j:()=>o,u:()=>i})},5223:(e,t,n)=>{n.d(t,{r:()=>a});var o=n(47940),i=n(50655);let r="parse-html-no-op",s=o.ZO.createPolicy(r,{createHTML:e=>i.O.apply({policy:()=>e,policyName:r,fallback:e,sanitize:!1,fallbackOnError:!0})});function a(e,t){let n=e.createElement("template");return n.innerHTML=s.createHTML(t),e.importNode(n.content,!0)}}}]);
//# sourceMappingURL=app_assets_modules_github_history_ts-app_assets_modules_github_profile_edit-social-account_ts-88f6ec-252ca1c3e1d8.js.map